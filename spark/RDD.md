## RDD

> spark 전용 분산 컬렉션 RDD



### RDD의 개념

##### 기능

데이터를 조작할 수 있는 다양한 변환 연산자를 제공

##### 성질

1. 불변성: 읽기 전용
2. 복원성: 장애 내성
3. 분산: 노드 한 개 이상에 저장된 데이터셋



### RDD 연산자

##### 변환 연산자

RDD의 데이터를 조작해 새로운 RDD 생성 

`map`

- 원본 RDD의 각 요소를 변환한 후 변환된 요소로 새로운 RDD 생성
- RDD의 모든 요소에 임의의 함수를 적용할 수 있는 변환 연산자

`filter`

- 주어진 조건에 따라 원본 RDD에서 일부 요소를 제외한 새 RDD를 생성

`distinct`

- 중복 요소를 제거한 새로운 RDD 반환

`flatmap`

- 반환한 배열의 중첩 구조를 한 단계 제거하고 모든 배열의 요소를 단일 컬렉션으로 병합한다는 것
- RDD의 모든 요소에 임의의 함수를 적용할 수 있는 변환 연산자

`sample`

- 호출된 RDD에서 무작위로 요소를 뽑아 새로운 RDD를 생성

- 인자

  - withReplacement: 같은 요소가 여러번 샘플링될 수 있는지 지정
  - fraction: 복원샘플링에서는 각 요소가 샘플링될 횟수의 기댓값을 의미, 비복원 샘플링에서는 각 요소가 샘플링될 기대 확률을 의미

  - seed: 난수 생성

##### 행동 연산자

연산자를 호출한 프로그램으로 계산 결과를 반환하거나 RDD 요소에 특정 작업을 수행하려고 실제 계산을 시작하는 역할

`takeSample`

- 정확한 개수로 RDD 요소를 샘플링
- 배열을 반환
- 인자
  - num: 샘플링 결과로 반환될 요소의 개수를 지정하는 정수형 변수

`take`

- 지정된 개수의 요소를 모을 때까지 RDD의 파티션을 하나씩 처리해 결과를 반환



### Double RDD

전체 합계, 평균, 표준편차, 분산, 히스토그램을 계산하는 함수 제공

`stats`

- 전체 개수, 합계, 평균, 최대값, 최소값, 분산, 표준편차를 한꺼번에 계산

`histogram`

1. 구간 경계를 표현하는 Double 값의 배열을 받고, 각 구간에 속한 요소 개수를 담은 Array 객체 반환
2. 구간 개수를 받아 이것으로 입력 데이터의 전체 범위를 균등하게 나눈 후 요소 두 개로 구성된 튜플 하나를 결과로 반환

`sumApprox` & `meanApprox`

- 밀리초 단위의 제한 시간을 인자로 받아 메서드가 실행될 최대 시간 결정
- finalValue 필드와 failure 필드로 구성된 PartialResult 객체를 결과로 반환